<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shrouded Sails</title>
    <meta name="description" content="Command your fleet through fog-shrouded waters in a turn-based naval strategy showdown.">
    <link rel="canonical" href="https://shrouded-sails.vercel.app/">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Shrouded Sails">
    <meta property="og:title" content="Shrouded Sails">
    <meta property="og:description" content="Command your fleet through fog-shrouded waters in a turn-based naval strategy showdown.">
    <meta property="og:url" content="https://shrouded-sails.vercel.app/">
    <meta property="og:image" content="https://shrouded-sails.vercel.app/assets/images/splash.webp">
    <meta property="og:image:alt" content="Shrouded Sails game splash art">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Shrouded Sails">
    <meta name="twitter:description" content="Command your fleet through fog-shrouded waters in a turn-based naval strategy showdown.">
    <meta name="twitter:image" content="https://shrouded-sails.vercel.app/assets/images/splash.webp">
    <meta name="twitter:image:alt" content="Shrouded Sails game splash art">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="game-container">
        <header class="game-header" id="gameHeader">
            <h1 class="game-title">Shrouded Sails</h1>
            <div class="header-info">
                <div class="header-zone header-zone-left">
                    <span id="turnInfo" class="header-pill">Turn: 1</span>
                    <span id="playerInfo" class="header-pill">Player: 1</span>
                </div>
                <div class="header-zone header-zone-center">
                    <div class="wind-widget" aria-label="Wind status">
                        <div class="wind-compass" aria-hidden="true">
                            <span id="windDirectionArrow" class="wind-direction-arrow">â†‘</span>
                        </div>
                        <div class="wind-meta">
                            <span class="wind-label">Wind</span>
                            <div class="wind-values">
                                <span id="windDirectionName">N</span>
                                <span class="wind-separator">â€¢</span>
                                <span>Str <span id="windStrengthValue">0</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-zone header-zone-right">
                    <button
                        id="mobileHeaderToggle"
                        class="mobile-ui-toggle mobile-ui-toggle-header"
                        type="button"
                        aria-expanded="true"
                        aria-controls="gameHeader"
                    >
                        Hide Top
                    </button>
                    <button id="combatFeedButton" class="combat-feed-button" type="button" aria-expanded="false" aria-controls="combatFeedPanel">
                        <span id="combatFeedStatusIcon" class="combat-feed-status-icon">ðŸ§­</span>
                        <span class="combat-feed-text">
                            <span class="combat-feed-title">Combat Feed</span>
                            <span id="combatFeedStatusText" class="combat-feed-status-text">Quiet seas</span>
                        </span>
                        <span id="combatFeedUnread" class="combat-feed-unread hidden">0</span>
                    </button>
                    <div class="zoom-controls" role="group" aria-label="Board zoom controls">
                        <button id="zoomOutBtn" class="zoom-control-btn" type="button" aria-label="Zoom out" title="Zoom Out (- or Numpad -)">âˆ’</button>
                        <button id="zoomInBtn" class="zoom-control-btn" type="button" aria-label="Zoom in" title="Zoom In (+/= or Numpad +)">+</button>
                        <button id="zoomResetBtn" class="zoom-control-btn zoom-control-reset" type="button" aria-label="Reset zoom" title="Reset Zoom">Reset</button>
                    </div>
                    <button id="inGameSettingsButton" class="in-game-settings-button" type="button"
                            aria-expanded="false" aria-controls="inGameSettingsPanel" title="Audio Settings">
                        <span class="in-game-settings-icon" aria-hidden="true">&#9881;</span>
                    </button>
                </div>
            </div>
        </header>

        <div class="game-board">
            <!-- Player 1 Ships Panel (Left) -->
            <aside class="ships-panel ships-panel-left">
                <h3>Red Fleet</h3>
                <div id="player1Ships" class="ships-list"></div>
            </aside>

            <div class="battlefield-column">
                <!-- Game Canvas -->
                <div class="canvas-container">
                    <canvas id="gameCanvas"></canvas>
                </div>
            </div>

            <!-- Player 2 Ships Panel (Right) -->
            <aside class="ships-panel ships-panel-right">
                <h3>Blue Fleet</h3>
                <div id="player2Ships" class="ships-list"></div>
            </aside>
        </div>

        <footer class="game-footer" id="gameFooter">
            <div class="footer-top-row">
                <div class="ship-info">
                    <span id="selectedShipInfo">No ship selected</span>
                </div>
                <button
                    id="mobileFooterToggle"
                    class="mobile-ui-toggle mobile-ui-toggle-footer"
                    type="button"
                    aria-expanded="true"
                    aria-controls="gameFooter"
                >
                    Hide Actions
                </button>
            </div>
            <div class="action-buttons">
                <button id="moveBtn" class="action-btn" disabled>Move</button>
                <button id="fireBtn" class="action-btn" disabled>Fire Cannons</button>
                <button id="boardBtn" class="action-btn" disabled>Board Enemy</button>
                <button id="endTurnBtn" class="action-btn primary">End Turn</button>
            </div>
        </footer>
    </div>

    <!-- Splash Modal -->
    <div
        id="splashModal"
        class="modal splash-modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="splashTitle"
        aria-describedby="splashDescription"
    >
        <div class="splash-top">
            <div class="splash-ornament" aria-hidden="true">&#9875;</div>
            <h2 id="splashTitle">Shrouded Sails</h2>
            <div class="splash-divider" aria-hidden="true">
                <span class="splash-divider-line"></span>
                <span class="splash-divider-diamond">&#9830;</span>
                <span class="splash-divider-line"></span>
            </div>
            <p id="splashDescription" class="splash-tagline">Navigate the Fog &middot; Command Your Fleet &middot; Conquer the Seas</p>
        </div>
        <div class="splash-bottom">
            <p class="splash-hint">Press any key or click to begin</p>
            <button id="continueFromSplashBtn" class="action-btn primary splash-continue-btn" type="button">
                Begin Your Voyage
            </button>
        </div>
    </div>

    <!-- Settings Modal -->
    <div
        id="settingsModal"
        class="modal hidden"
        role="dialog"
        aria-modal="true"
        aria-labelledby="settingsTitle"
    >
        <div class="modal-content settings-modal">
            <h2 id="settingsTitle">Game Settings</h2>
            <div class="settings-categories">
                <section class="settings-category" aria-labelledby="settingsCategoryRules">
                    <h3 id="settingsCategoryRules">Game Rules</h3>
                    <div class="settings-grid">
                        <div class="setting-row">
                            <div class="setting-label-wrap">
                                <label for="fogOfWarCheckbox" class="setting-title">Fog of War</label>
                                <span class="info-icon" tabindex="0" aria-label="Fog of War details">
                                    i
                                    <span class="tooltip-content">Enable tactical mode with limited visibility. Enemy ships are only visible within your fleet's vision range. Vision ranges are scaled for the fine grid (Sloop=8, Frigate=6, Flagship=4).</span>
                                </span>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch" for="fogOfWarCheckbox">
                                    <input type="checkbox" id="fogOfWarCheckbox" checked>
                                    <span class="slider" aria-hidden="true"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="settings-category" aria-labelledby="settingsCategoryInterface">
                    <h3 id="settingsCategoryInterface">Interface</h3>
                    <div class="settings-grid">
                        <div class="setting-row">
                            <div class="setting-label-wrap">
                                <label for="combatDetailLevelSelect" class="setting-title">Combat Report Detail</label>
                                <span class="info-icon" tabindex="0" aria-label="Combat detail description">
                                    i
                                    <span class="tooltip-content">Detailed shows full per-cannon combat reports. Compact shows brief summaries in the feed.</span>
                                </span>
                            </div>
                            <div class="setting-control">
                                <select id="combatDetailLevelSelect" class="setting-select">
                                    <option value="detailed" selected>Detailed</option>
                                    <option value="compact">Compact</option>
                                </select>
                            </div>
                        </div>
                        <div class="setting-row">
                            <div class="setting-label-wrap">
                                <label for="boardLayoutSelect" class="setting-title">Board Layout</label>
                                <span class="info-icon" tabindex="0" aria-label="Board layout description">
                                    i
                                    <span class="tooltip-content">Choose landscape (40x30) or portrait (30x40) board orientation.</span>
                                </span>
                            </div>
                            <div class="setting-control">
                                <select id="boardLayoutSelect" class="setting-select">
                                    <option value="landscape" selected>Landscape (40x30)</option>
                                    <option value="portrait">Portrait (30x40)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="settings-category" aria-labelledby="settingsCategoryAudio">
                    <h3 id="settingsCategoryAudio">Audio</h3>
                    <div class="settings-grid">
                        <div class="setting-row">
                            <div class="setting-label-wrap">
                                <label for="muteAllCheckbox" class="setting-title">Mute All Audio</label>
                                <span class="info-icon" tabindex="0" aria-label="Mute audio description">
                                    i
                                    <span class="tooltip-content">Mutes all game audio when enabled. Use the sliders below for volume control when unmuted.</span>
                                </span>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch" for="muteAllCheckbox">
                                    <input type="checkbox" id="muteAllCheckbox">
                                    <span class="slider" aria-hidden="true"></span>
                                </label>
                            </div>
                        </div>
                        <div class="setting-row setting-row-wide">
                            <div class="audio-controls">
                                <div class="audio-control-row">
                                    <label for="masterVolumeSlider" class="audio-control-label">Master Volume</label>
                                    <span id="masterVolumeValue" class="audio-control-value">70%</span>
                                    <input type="range" id="masterVolumeSlider" min="0" max="100" step="1" value="70" class="audio-slider">
                                </div>
                                <div class="audio-control-row">
                                    <label for="effectsVolumeSlider" class="audio-control-label">Effects Volume</label>
                                    <span id="effectsVolumeValue" class="audio-control-value">80%</span>
                                    <input type="range" id="effectsVolumeSlider" min="0" max="100" step="1" value="80" class="audio-slider">
                                </div>
                                <div class="audio-control-row">
                                    <label for="uiVolumeSlider" class="audio-control-label">UI Volume</label>
                                    <span id="uiVolumeValue" class="audio-control-value">70%</span>
                                    <input type="range" id="uiVolumeSlider" min="0" max="100" step="1" value="70" class="audio-slider">
                                </div>
                                <div class="audio-control-row">
                                    <label for="musicVolumeSlider" class="audio-control-label">Music Volume</label>
                                    <span id="musicVolumeValue" class="audio-control-value">50%</span>
                                    <input type="range" id="musicVolumeSlider" min="0" max="100" step="1" value="50" class="audio-slider">
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div class="settings-actions">
                <button id="startGameBtn" class="action-btn primary" type="button">Start Game</button>
                <button id="startTutorialBtn" class="action-btn" type="button">Start with Tutorial</button>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="gameOverModal" class="modal hidden">
        <div class="modal-content">
            <h2 id="gameOverTitle">Game Over!</h2>
            <div class="modal-divider" aria-hidden="true">
                <span class="modal-divider-line"></span>
                <span class="modal-divider-diamond">&#9830;</span>
                <span class="modal-divider-line"></span>
            </div>
            <p id="gameOverMessage"></p>
            <button id="restartBtn" class="action-btn primary">Play Again</button>
        </div>
    </div>

    <!-- Turn Transition Modal -->
    <div id="turnTransitionModal" class="modal hidden">
        <div class="modal-content turn-transition">
            <h2 id="turnTransitionTitle">Player 2's Turn</h2>
            <div class="modal-divider" aria-hidden="true">
                <span class="modal-divider-line"></span>
                <span class="modal-divider-diamond">&#9830;</span>
                <span class="modal-divider-line"></span>
            </div>
            <p id="turnTransitionMessage">Pass the device to the other player</p>
            <button id="startTurnBtn" class="action-btn primary large">Click to Start Turn</button>
        </div>
    </div>

    <div id="combatFeedBackdrop" class="combat-feed-backdrop hidden"></div>
    <aside id="combatFeedPanel" class="combat-feed-panel hidden" aria-label="Combat Feed">
        <div class="combat-feed-panel-header">
            <h3>Combat Feed</h3>
            <button id="combatFeedClose" class="combat-feed-close" type="button" aria-label="Close combat feed">Close</button>
        </div>
        <p class="combat-feed-panel-subtitle">Newest events first. Click an entry to expand details.</p>
        <div id="combatLogEmpty" class="combat-log-empty">No combat yet. Fire cannons or board an enemy ship to create entries.</div>
        <div id="combatLogList" class="combat-log-list"></div>
    </aside>

    <div id="inGameSettingsBackdrop" class="in-game-settings-backdrop hidden"></div>
    <aside id="inGameSettingsPanel" class="in-game-settings-panel hidden" aria-label="Audio Settings">
        <div class="in-game-settings-panel-header">
            <h3>Audio Settings</h3>
            <button id="inGameSettingsClose" class="in-game-settings-close" type="button" aria-label="Close audio settings">Close</button>
        </div>
        <div class="in-game-settings-body">
            <div class="setting-item">
                <label for="igMuteAllCheckbox" class="setting-label">
                    <input type="checkbox" id="igMuteAllCheckbox">
                    <span class="setting-title">Mute All</span>
                </label>
            </div>
            <div class="setting-item">
                <div class="audio-controls">
                    <div class="audio-control-row">
                        <label for="igMasterVolumeSlider" class="audio-control-label">Master Volume</label>
                        <span id="igMasterVolumeValue" class="audio-control-value">70%</span>
                        <input type="range" id="igMasterVolumeSlider" min="0" max="100" step="1" value="70" class="audio-slider">
                    </div>
                    <div class="audio-control-row">
                        <label for="igEffectsVolumeSlider" class="audio-control-label">Effects Volume</label>
                        <span id="igEffectsVolumeValue" class="audio-control-value">80%</span>
                        <input type="range" id="igEffectsVolumeSlider" min="0" max="100" step="1" value="80" class="audio-slider">
                    </div>
                    <div class="audio-control-row">
                        <label for="igUiVolumeSlider" class="audio-control-label">UI Volume</label>
                        <span id="igUiVolumeValue" class="audio-control-value">70%</span>
                        <input type="range" id="igUiVolumeSlider" min="0" max="100" step="1" value="70" class="audio-slider">
                    </div>
                    <div class="audio-control-row">
                        <label for="igMusicVolumeSlider" class="audio-control-label">Music Volume</label>
                        <span id="igMusicVolumeValue" class="audio-control-value">50%</span>
                        <input type="range" id="igMusicVolumeSlider" min="0" max="100" step="1" value="50" class="audio-slider">
                    </div>
                </div>
            </div>
            <div class="setting-item">
                <button id="reportBugBtn" class="action-btn danger report-bug-btn" type="button">Report Feedback/Bug</button>
            </div>
        </div>
    </aside>

    <div id="bugReportModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="bugReportTitle">
        <div class="modal-content bug-report-modal">
            <h2 id="bugReportTitle">Report Feedback / Bug</h2>
            <p class="bug-report-intro">Send a report to the GitHub issue tracker. Device and game context is attached automatically.</p>
            <form id="bugReportForm" class="bug-report-form" novalidate>
                <label for="bugReportTitleInput" class="bug-report-label">Title</label>
                <input id="bugReportTitleInput" class="bug-report-input" type="text" maxlength="120" required>

                <label for="bugReportDescriptionInput" class="bug-report-label">Description</label>
                <textarea id="bugReportDescriptionInput" class="bug-report-textarea" maxlength="5000" rows="8" required></textarea>

                <div id="bugReportStatus" class="bug-report-status" aria-live="polite"></div>

                <div class="settings-actions">
                    <button id="bugReportSubmitBtn" class="action-btn primary" type="submit">Submit Report</button>
                    <button id="bugReportCancelBtn" class="action-btn" type="button">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="./src/main.js"></script>
</body>
</html>
